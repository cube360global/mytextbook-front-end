<div mat-dialog-title>
  <div class="d-flex justify-content-between align-items-center">
    <div class="header-text-sm">
      Password change
    </div>
    <button (click)="dialogRef.close()" color="warn" mat-icon-button>
      <mat-icon>highlight_off</mat-icon>
    </button>
  </div>
</div>
<div mat-dialog-content class="mt-3 mb-4">
  <form (ngSubmit)="onSavePwd()" [formGroup]="pwdForm">
    <div>
      <mat-label class="text-color-01-b">Current password (leave blank to leave unchanged)</mat-label>
      <mat-form-field appearance="outline" class="mt-1" floatLabel="never">
        <mat-icon class="me-1 text-color-01" matPrefix>lock</mat-icon>
        <input
          [type]="hide ? 'password' : 'text'"
          formControlName="password"
          matInput
          placeholder="********">
        <button
          (click)="$event.preventDefault();hide = !hide"
          mat-icon-button
          matSuffix>
          <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
      </mat-form-field>
    </div>

    <div class="mb-2">
      <mat-label class="text-color-01-b">New password (leave blank to leave unchanged)</mat-label>
      <mat-form-field [color]="passwordComponent.color" appearance="outline" class="mt-1" floatLabel="never">
        <mat-icon class="me-1 text-color-01" matPrefix>lock</mat-icon>
        <input
          #password
          [type]="hideNew ? 'password' : 'text'"
          formControlName="newPassword"
          matInput
          placeholder="********">

        <button (click)="$event.preventDefault();hideNew = !hideNew"
                mat-icon-button
                matSuffix>
          <mat-icon>{{hideNew ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-hint align="end" aria-live="polite">
          {{password.value.length}} / {{passwordComponent.max}}
        </mat-hint>
      </mat-form-field>
      <!--@angular-material-extensions/password-strength's main component-->
      <mat-password-strength #passwordComponent
                             (onStrengthChanged)="onStrengthChanged($event)"
                             [password]="password.value">
      </mat-password-strength>
      <!--Password's strength info-->
      <mat-password-strength-info
        *ngIf="showDetails"
        [passwordComponent]="passwordComponent">
      </mat-password-strength-info>
    </div>

    <mat-label class="text-color-01-b">Confirm new password</mat-label>
    <mat-form-field appearance="outline" class="mt-1" floatLabel="never">
      <mat-icon class="me-1 text-color-01" matPrefix>lock</mat-icon>
      <input [type]="hideConf ? 'password' : 'text'"
             formControlName="conPassword"
             matInput
             placeholder="********">

      <button (click)="$event.preventDefault();hideConf = !hideConf"
              mat-icon-button
              matSuffix>
        <mat-icon>{{hideConf ? 'visibility_off' : 'visibility'}}</mat-icon>
      </button>
      <mat-error *ngIf="pwdForm.controls['password'].hasError('minlength')">Min 8 characters</mat-error>
      <mat-error *ngIf="pwdForm.controls['password'].hasError('required')">Required</mat-error>
    </mat-form-field>
    <button
      class="mat-button-rounded-sm"
      color="primary"
      mat-raised-button
      style="text-transform: uppercase">
      Change Password
    </button>
  </form>
</div>
